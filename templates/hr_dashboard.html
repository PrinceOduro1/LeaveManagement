{% extends 'base.html' %}
{% block title %}HR Dashboard{% endblock %}
{% block content %}
<h3>HR Dashboard</h3>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h5>Supervisor-Approved Leave Requests</h5>
  <a href="{% url 'export_leave_pdf' %}" class="btn btn-outline-primary">Download PDF</a>
</div>

<table class="table table-striped">
  <thead class="thead-light">
    <tr>
      <th>Employee</th>
      <th>Dates</th>
      <th>Reason</th>
      <th>Supervisor Comment</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for leave in requests %}
      <tr>
        <td>{{ leave.employee.user.get_full_name }}</td>
        <td>{{ leave.start_date }} â†’ {{ leave.end_date }}</td>
        <td>{{ leave.reason }}</td>
        <td>{{ leave.supervisor_comment }}</td>
        <td>{{ leave.status }}</td>
        <td>
          <form method="POST" action="{% url 'hr_approve' leave.id %}">
            {% csrf_token %}
            <textarea name="comment" placeholder="HR comment..." class="form-control mb-2" rows="2"></textarea>
            <button name="action" value="approve" class="btn btn-success btn-sm">Approve</button>
            <button name="action" value="reject" class="btn btn-danger btn-sm">Reject</button>
          </form>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="6" class="text-center">No supervisor-approved requests.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
